{% extends "base.html" %}

{% block title %}LLC Directory - Find Local Businesses{% endblock %}
{% block meta_description %}Search and discover local LLCs and businesses in your area. Find contact information, ratings, and business details.{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">Find Local LLCs & Businesses</h1>
                <p class="lead mb-4">Discover trusted local businesses in your area. Get contact information, ratings, and business details all in one place.</p>
            </div>
            <div class="col-lg-6">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <h5 class="card-title mb-3">Search Businesses</h5>
                        <form method="GET" action="{{ url_for('index') }}">
                            <div class="row g-3">
                                <div class="col-12">
                                    <input type="text" class="form-control" name="search" placeholder="Search by business name, category, or location..." value="{{ search }}">
                                </div>
                                <div class="col-md-4">
                                    <select class="form-select" name="state">
                                        <option value="">All States</option>
                                        {% for state in states %}
                                        <option value="{{ state }}" {% if state == selected_state %}selected{% endif %}>{{ state }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <select class="form-select" name="city">
                                        <option value="">All Cities</option>
                                        {% for city in cities %}
                                        <option value="{{ city }}" {% if city == selected_city %}selected{% endif %}>{{ city }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <select class="form-select" name="category">
                                        <option value="">All Categories</option>
                                        {% for category in categories %}
                                        <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>{{ category }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-search me-2"></i>Search
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About Our Directory Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="display-5 fw-bold text-primary">About Our LLC Directory</h2>
                <p class="lead text-muted">Your comprehensive resource for finding and understanding LLC services across the United States</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="fas fa-search fa-2x text-primary"></i>
                        </div>
                        <h4 class="card-title">Find Local LLC Services</h4>
                        <p class="card-text">Search through thousands of local LLC formation services, attorneys, and business consultants in your area. Get detailed contact information, ratings, and business details to make informed decisions.</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Browse by state and city</li>
                            <li><i class="fas fa-check text-success me-2"></i>Filter by business category</li>
                            <li><i class="fas fa-check text-success me-2"></i>View ratings and reviews</li>
                            <li><i class="fas fa-check text-success me-2"></i>Access contact information</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="fas fa-calculator fa-2x text-success"></i>
                        </div>
                        <h4 class="card-title">Interactive Calculators</h4>
                        <p class="card-text">Use our educational calculators to estimate costs and understand your options when forming an LLC. All calculators are designed for educational purposes to help you plan your business formation.</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-calculator text-info me-2"></i>LLC Formation Cost Calculator</li>
                            <li><i class="fas fa-calculator text-info me-2"></i>LLC vs. S-Corp Tax Savings Calculator</li>
                            <li><i class="fas fa-calculator text-info me-2"></i>Foreign Qualification Cost Calculator</li>
                            <li><i class="fas fa-info-circle text-warning me-2"></i>Educational purposes only</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="bg-warning bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="fas fa-chart-line fa-2x text-warning"></i>
                        </div>
                        <h4 class="card-title">Compare Online Services</h4>
                        <p class="card-text">Compare top online LLC formation services with detailed pros and cons, pricing information, and direct links to their websites. Make informed decisions about local vs. online formation options.</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-star text-warning me-2"></i>Top 5 online services ranked</li>
                            <li><i class="fas fa-balance-scale text-info me-2"></i>Local vs. online comparisons</li>
                            <li><i class="fas fa-dollar-sign text-success me-2"></i>Pricing breakdowns</li>
                            <li><i class="fas fa-external-link-alt text-primary me-2"></i>Direct service links</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-5">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h3 class="text-primary mb-3">Ready to Start Your LLC Journey?</h3>
                                <p class="mb-3">Whether you're looking for local expertise or prefer online convenience, our directory helps you find the right LLC formation service for your needs. Use our calculators to estimate costs and explore your options.</p>
                                <div class="d-flex flex-wrap gap-2">
                                    <a href="#search-section" class="btn btn-primary">
                                        <i class="fas fa-search me-2"></i>Search Local Services
                                    </a>
                                    <a href="{{ url_for('all_locations') }}" class="btn btn-outline-primary">
                                        <i class="fas fa-map me-2"></i>Browse All States
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 text-center">
                                <i class="fas fa-rocket fa-4x text-primary opacity-75"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Results Section -->
<section class="py-5" id="search-section">
    <div class="container">
        {% if search or selected_state or selected_city or selected_category %}
        <div class="row mb-4">
            <div class="col-12">
                <h2>Search Results</h2>
                <p class="text-muted">Found {{ total_count }} businesses</p>
                
                <!-- Active Filters -->
                {% if search or selected_state or selected_city or selected_category %}
                <div class="mb-3">
                    <strong>Active Filters:</strong>
                    {% if search %}
                    <span class="badge bg-primary me-2">{{ search }}</span>
                    {% endif %}
                    {% if selected_state %}
                    <span class="badge bg-primary me-2">{{ selected_state }}</span>
                    {% endif %}
                    {% if selected_city %}
                    <span class="badge bg-primary me-2">{{ selected_city }}</span>
                    {% endif %}
                    {% if selected_category %}
                    <span class="badge bg-primary me-2">{{ selected_category }}</span>
                    {% endif %}
                    <a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-secondary">Clear All</a>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Business Listings -->
        <div class="row">
            {% if llcs %}
                {% for llc in llcs %}
                <div class="col-lg-6 col-xl-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">{{ llc.name }}</h5>
                            <p class="card-text text-muted">{{ llc.category }}</p>
                            
                            <div class="mb-3">
                                {% if llc.rating %}
                                <div class="d-flex align-items-center mb-2">
                                    <div class="text-warning me-2">
                                        {% for i in range(5) %}
                                            {% if i < llc.rating|int %}
                                            <i class="fas fa-star"></i>
                                            {% else %}
                                            <i class="far fa-star"></i>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                    <span class="text-muted">{{ llc.rating }}/5</span>
                                    {% if llc.reviews %}
                                    <span class="text-muted ms-2">({{ llc.reviews }} reviews)</span>
                                    {% endif %}
                                </div>
                                {% endif %}
                            </div>
                            
                            <div class="mb-3">
                                <p class="mb-1">
                                    <i class="fas fa-map-marker-alt text-primary me-2"></i>
                                    {{ llc.city }}, {{ llc.state }}
                                </p>
                                {% if llc.full_address %}
                                <p class="mb-1">
                                    <i class="fas fa-location-dot text-primary me-2"></i>
                                    {{ llc.full_address }}
                                </p>
                                {% endif %}
                                {% if llc.phone %}
                                <p class="mb-1">
                                    <i class="fas fa-phone text-primary me-2"></i>
                                    <a href="tel:{{ llc.phone }}" class="text-decoration-none">{{ llc.phone }}</a>
                                </p>
                                {% endif %}
                                {% if llc.site %}
                                <p class="mb-1">
                                    <i class="fas fa-globe text-primary me-2"></i>
                                    <a href="{{ llc.site }}" target="_blank" class="text-decoration-none">Visit Website</a>
                                </p>
                                {% endif %}
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="{{ url_for('city_page', state_name=llc.state.lower().replace(' ', '-'), city_name=llc.city.lower().replace(' ', '-')) }}" class="btn btn-outline-primary btn-sm">
                                    View More in {{ llc.city }}
                                </a>
                                {% if llc.site %}
                                <a href="{{ llc.site }}" target="_blank" class="btn btn-primary btn-sm">
                                    Visit Site
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-12 text-center py-5">
                    <i class="fas fa-search fa-3x text-muted mb-3"></i>
                    <h3>No businesses found</h3>
                    <p class="text-muted">Try adjusting your search criteria or browse by state/city.</p>
                </div>
            {% endif %}
        </div>

        <!-- Browse by State Section -->
        {% if not search and not selected_state and not selected_city and not selected_category %}
        <div class="row mt-5">
            <div class="col-12">
                <h2 class="mb-4">Browse by State</h2>
                <div class="row">
                    {% for state in states %}
                    <div class="col-md-3 col-sm-6 mb-3">
                        <a href="{{ url_for('state_page', state_name=state.lower().replace(' ', '-')) }}" class="text-decoration-none">
                            <div class="card text-center h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <i class="fas fa-map fa-2x text-primary mb-2"></i>
                                    <h6 class="card-title">{{ state }}</h6>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Browse by Cities Section -->
        <div class="row mt-5">
            <div class="col-12">
                <h2 class="mb-4">Browse by Cities</h2>
                <div class="row">
                    {% for city in all_cities[:50] %}
                    <div class="col-md-3 col-sm-6 mb-3">
                        <a href="{{ url_for('city_page', state_name=city.state.lower().replace(' ', '-'), city_name=city.city.lower().replace(' ', '-')) }}" class="text-decoration-none">
                            <div class="card text-center h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <i class="fas fa-city fa-2x text-primary mb-2"></i>
                                    <h6 class="card-title">{{ city.city }}</h6>
                                    <p class="card-text text-muted small">{{ city.state }}</p>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
                {% if all_cities|length > 50 %}
                <div class="text-center mt-4">
                    <a href="{{ url_for('all_locations') }}#cities" class="btn btn-outline-primary">
                        <i class="fas fa-list me-2"></i>
                        View All {{ all_cities|length }} Cities
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
